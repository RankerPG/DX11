## 20.01.26
<code> ~ 576 page </code>

## 테셀레이션

> 테셀레이션을 사용하는 이유
1. 동적 LOD
2. 효율적인 물리 및 애니메이션 계산
3. 메모리 절약

- 테셀레이션은 IA에 삼각형을 제출하지 않고 제어점들로 이루어진 패치들을 제출한다.

- 테셀레이션을 위한 정점 쉐이더는 제어점을 넘겨주게 되는데 필요에 따라 물리나 애니메이션 계산을 하여 변경 후 넘겨준다.

## 덮개 쉐이더 (hull shader)

### 상수 덮개 쉐이더

- 테셀레이션 계수를 출력하며 패치를 얼마나 세분화 할 것인지 결정하며 패치마다 실행된다.

> 패치에 대한 테셀레이션 계수
1. 각 변에 따른 세분 정도를 제어하는 변 테셀레이션 계수
2. 패치 내부의 세분 정도를 제어하는 내부 테셀레이션 계수

> 테셀레이션 정도를 결정하는 측정치
1. 카메라와의 거리
2. 화면 영역 포괄도
3. 방향
4. 표면의 거친 정도

> 성능 최적화를 위해 고려할 점
1. 테셀레이션 계수가 1일 때, 테셀레이션 단계를 연산하는 것
2. 픽셀이 8개 미만일 정도로 작은 삼각형일 때
3. 테셀레이션을 사용하는 경우 일괄적으로 묶어서 처리

### 제어점 덮개 쉐이더

- 제어점들을 변경하거나 추가하는 역할로 제어점마다 실행된다. 덮개 쉐이더는 표면의 표현을 변경할 때도 사용하는데
곡선 표현등에 사용하는 것 같음.

``` hlsl
[domain("quad")] // 패치의 종류 (tri, quad, isoline)
[partitioning("integer")] // 테셀레이션 세분 모드 지정 (integer, fractional_even, fractional_odd)
[outputtopology("triangle_cw")] // 삼각형의 감김 순서 (trialgle_cw, triangle_ccw, line)
[outputcontrolpoints(4)] // 덮개 쉐이더가 출력할 제어점의 갯수
[patchconstantfunc("ConstantHS")] // 상수 덮개 쉐이더 함수 이름
[maxtessfactor(64.f)] // 테셀레이션 계수의 최대값.
//DX11의 최대값은 64이고 최대값을 알고 있으면 자원 추정이 가능해 최적화 여지가 있음
```

## 테셀레이터 단계

- 이 단계에서는 직접적으로 해주는 것은 없고 하드웨어에서 제어한다.

## 영역 쉐이더 (domain shader)

- 테셀레이션된 패치에 대한 정점 쉐이더로 작용하는 쉐이더. 영역 쉐이더가 실제 정점 위치를 입력받는 것이 아닌 
패치 영역 공간안에서의 그 점의 매개변수 좌표(u, v)를 받는다. 이 매개변수 좌표와 제어점들로부터 실제 3차원 정점
위치를 유도하는 것은 영역 쉐이더가 해야 될 연산.

## 베지어 사각형 패치

- 선형 보간을 거듭하여 곡선을 나타낼 수 있고, 베른슈타인 기저 함수를 통해 n차 베지어 곡선 공식을 구할 수 있다.

<code> 테셀레이션 적용과 590 ~ 595는 수학 책 마저보고 진행 </code>

# 응용

## 1인칭 카메라 만들기













